(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99bed730"],{b06d:function(e,t,c){"use strict";c.r(t);var l=c("7a23"),r={class:"table mt-5"},n=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",{scope:"col"},"購買時間"),Object(l["h"])("th",{scope:"col"},"Email"),Object(l["h"])("th",{scope:"col"},"購買品項"),Object(l["h"])("th",{scope:"col",class:"text-end"},"應付金額"),Object(l["h"])("th",{scope:"col"},"是否付款"),Object(l["h"])("th",{scope:"col"},"編輯")])],-1),a={scope:"row"},o={class:"text-end"},d={class:"form-check form-switch"},b=["checked"],s={key:0,class:"form-check-label",for:"flexSwitchCheckChecked"},i={key:1,class:"form-check-label",for:"flexSwitchCheckChecked"},O={class:"btn-group",role:"group"},h=["onClick"],u=["onClick"];function j(e,t,c,j,p,m){var g=Object(l["J"])("Loading"),f=Object(l["J"])("Pagination"),M=Object(l["J"])("OrderEditModal"),v=Object(l["J"])("OrderDeleteModal");return Object(l["z"])(),Object(l["g"])(l["a"],null,[Object(l["k"])(g,{active:p.isLoading},null,8,["active"]),Object(l["h"])("table",r,[n,Object(l["h"])("tbody",null,[(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(p.orders,(function(t){return Object(l["z"])(),Object(l["g"])("tr",{key:t.id},[Object(l["h"])("th",a,Object(l["M"])(e.$filters.date(t.paid_date)),1),Object(l["h"])("td",null,Object(l["M"])(t.user.email),1),Object(l["h"])("td",null,[Object(l["h"])("ul",null,[(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(t.products,(function(e){return Object(l["z"])(),Object(l["g"])("li",{key:e.id},Object(l["M"])(e.product.title),1)})),128))])]),Object(l["h"])("td",o,Object(l["M"])(t.total),1),Object(l["h"])("td",null,[Object(l["h"])("div",d,[Object(l["h"])("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",checked:t.is_paid,disabled:""},null,8,b),t.is_paid?(Object(l["z"])(),Object(l["g"])("label",s,"已付款")):(Object(l["z"])(),Object(l["g"])("label",i,"未付款"))])]),Object(l["h"])("td",null,[Object(l["h"])("div",O,[Object(l["h"])("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:function(e){return m.openOrderModal(t)}}," 檢視 ",8,h),Object(l["h"])("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:function(e){return m.openOrderDeleteModal(t,p.pagination)}}," 刪除 ",8,u)])])])})),128))])]),Object(l["k"])(f,{pages:p.pagination,onChangePage:m.getOrders,onPreviousPage:m.getOrders,onNextPage:m.getOrders},null,8,["pages","onChangePage","onPreviousPage","onNextPage"]),Object(l["k"])(M,{ref:"orderEditModal",order:p.tempOrder},null,8,["order"]),Object(l["k"])(v,{ref:"orderDeleteModal",order:p.tempDeleteOrder,onDeleteOrder:m.deleteOrder},null,8,["order","onDeleteOrder"])],64)}var p=c("1da1"),m=c("5530"),g=(c("96cf"),c("99af"),c("b0c0"),{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",ref:"modal"}),f={class:"modal-dialog modal-xl",role:"document"},M={class:"modal-content border-0"},v=Object(l["h"])("div",{class:"modal-header bg-dark text-white"},[Object(l["h"])("h5",{class:"modal-title"},[Object(l["h"])("span",null,"訂單細節")]),Object(l["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),k={class:"modal-body"},y={class:"row"},x={class:"col-lg-4"},w=Object(l["h"])("h3",null,"用戶資料",-1),C={class:"table"},D=Object(l["h"])("th",null,"姓名",-1),z=Object(l["h"])("th",null,"Email",-1),P=Object(l["h"])("th",null,"電話",-1),_=Object(l["h"])("th",null,"地址",-1),S={class:"col-lg-8"},$=Object(l["h"])("h3",null,"訂單細節",-1),L={class:"table"},E=Object(l["h"])("th",null,"訂單編號",-1),J=Object(l["h"])("th",null,"下單時間",-1),U=Object(l["h"])("th",null,"付款時間",-1),H=Object(l["h"])("th",null,"付款狀態",-1),R=Object(l["h"])("th",null,"總金額",-1),F=Object(l["h"])("h3",null,"選購商品",-1),q={class:"table"},N={class:"text-end"},I={class:"modal-footer"},T=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function X(e,t,c,r,n,a){return Object(l["z"])(),Object(l["g"])("div",g,[Object(l["h"])("div",f,[Object(l["h"])("div",M,[v,Object(l["h"])("div",k,[Object(l["h"])("div",y,[Object(l["h"])("div",x,[w,Object(l["h"])("table",C,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[D,Object(l["h"])("td",null,Object(l["M"])(n.tempUser.name),1)]),Object(l["h"])("tr",null,[z,Object(l["h"])("td",null,Object(l["M"])(n.tempUser.email),1)]),Object(l["h"])("tr",null,[P,Object(l["h"])("td",null,Object(l["M"])(n.tempUser.tel),1)]),Object(l["h"])("tr",null,[_,Object(l["h"])("td",null,Object(l["M"])(n.tempUser.address),1)])])])]),Object(l["h"])("div",S,[$,Object(l["h"])("table",L,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[E,Object(l["h"])("td",null,Object(l["M"])(n.tempOrder.id),1)]),Object(l["h"])("tr",null,[J,Object(l["h"])("td",null,Object(l["M"])(e.$filters.date(n.tempOrder.create_at)),1)]),Object(l["h"])("tr",null,[U,Object(l["h"])("td",null,Object(l["M"])(e.$filters.date(n.tempOrder.paid_date)),1)]),Object(l["h"])("tr",null,[H,Object(l["h"])("td",{class:Object(l["s"])({"text-success":n.tempOrder.is_paid})},Object(l["M"])(n.tempOrder.is_paid?"已付款":"未付款"),3)]),Object(l["h"])("tr",null,[R,Object(l["h"])("td",null,Object(l["M"])(n.tempOrder.total),1)])])]),F,Object(l["h"])("table",q,[Object(l["h"])("tbody",null,[(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(n.tempProducts,(function(e){return Object(l["z"])(),Object(l["g"])("tr",{key:e.id},[Object(l["h"])("th",null,Object(l["M"])(e.product.title),1),Object(l["h"])("td",null,Object(l["M"])(e.qty)+" / "+Object(l["M"])(e.product.unit),1),Object(l["h"])("td",N,Object(l["M"])(e.final_total),1)])})),128))])])])])]),Object(l["h"])("div",I,[T,Object(l["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=function(){return e.hideModal&&e.hideModal.apply(e,arguments)})}," 確認 ")])])])],512)}var A=c("e0ae"),B={mixins:[A["a"]],props:{order:{type:Object,default:function(){return{}}}},data:function(){return{modal:{},tempOrder:{},tempProducts:{},tempUser:{}}},watch:{order:function(){this.tempOrder=this.order,this.tempProducts=this.order.products,this.tempUser=this.order.user}}},G=c("6b0d"),K=c.n(G);const Q=K()(B,[["render",X]]);var V=Q,W={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",ref:"modal"},Y={class:"modal-dialog modal-xl",role:"document"},Z={class:"modal-content border-0"},ee=Object(l["h"])("div",{class:"modal-header bg-danger text-white"},[Object(l["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(l["h"])("span",null,"刪除訂單")]),Object(l["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),te={class:"modal-body"},ce=Object(l["h"])("h5",null,"是否刪除以下訂單？（刪除後無法復原）",-1),le={class:"table table-borderless"},re=Object(l["h"])("thead",{class:"border-bottom"},[Object(l["h"])("tr",null,[Object(l["h"])("th",{scope:"col"},"名稱"),Object(l["h"])("th",{scope:"col"},"數量"),Object(l["h"])("th",{scope:"col",class:"text-end"},"金額")])],-1),ne={class:"text-end"},ae={class:"modal-footer"},oe=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function de(e,t,c,r,n,a){return Object(l["z"])(),Object(l["g"])("div",W,[Object(l["h"])("div",Y,[Object(l["h"])("div",Z,[ee,Object(l["h"])("div",te,[ce,Object(l["h"])("table",le,[re,Object(l["h"])("tbody",null,[(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(n.tempOrder.products,(function(e){return Object(l["z"])(),Object(l["g"])("tr",{key:e.id},[Object(l["h"])("th",null,Object(l["M"])(e.product.title),1),Object(l["h"])("td",null,Object(l["M"])(e.qty)+" / "+Object(l["M"])(e.product.unit),1),Object(l["h"])("td",ne,Object(l["M"])(e.final_total),1)])})),128))])])]),Object(l["h"])("div",ae,[oe,Object(l["h"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(t){return e.$emit("delete-order",n.tempOrder)})}," 確認刪除 ")])])])],512)}var be={mixins:[A["a"]],props:{order:{type:Object}},data:function(){return{modal:{},tempOrder:{}}},watch:{order:function(){this.tempOrder=this.order}}};const se=K()(be,[["render",de]]);var ie=se,Oe=c("1799"),he={components:{OrderEditModal:V,OrderDeleteModal:ie,Pagination:Oe["a"]},inject:["pushMessageStateForDashboard"],data:function(){return{isLoading:!1,tempOrder:{},tempDeleteOrder:{},orders:[],pagination:{}}},methods:{openOrderModal:function(e){this.tempOrder=e,this.$refs.orderEditModal.showModal(),console.log("openOrderModal",e)},openOrderDeleteModal:function(e,t){this.tempDeleteOrder=Object(m["a"])(Object(m["a"])({},e),t),this.$refs.orderDeleteModal.showModal()},deleteOrder:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function c(){var l,r,n;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/admin/order/").concat(e.id),c.next=4,t.$http.delete(l);case 4:r=c.sent,console.log("deleteOrder response",r),n=e.current_page,t.getOrders(n),t.$refs.orderDeleteModal.hideModal(),t.pushMessageStateForDashboard(r,e,"刪除"),c.next=14;break;case 12:c.prev=12,c.t0=c["catch"](0);case 14:case"end":return c.stop()}}),c,null,[[0,12]])})))()},getOrders:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function c(){var l,r;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,t.isLoading=!0,l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/admin/orders?page=").concat(e),c.next=5,t.$http.get(l);case 5:r=c.sent,t.orders=r.data.orders,t.pagination=r.data.pagination,t.isLoading=!1,console.log("getOrders",r),console.log("this.orders",t.orders),console.log("this.pagination",t.pagination),c.next=17;break;case 14:c.prev=14,c.t0=c["catch"](0),console.log(c.t0);case 17:case"end":return c.stop()}}),c,null,[[0,14]])})))()}},created:function(){this.getOrders()}};const ue=K()(he,[["render",j]]);t["default"]=ue},b0c0:function(e,t,c){var l=c("83ab"),r=c("5e77").EXISTS,n=c("e330"),a=c("9bf2").f,o=Function.prototype,d=n(o.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=n(b.exec),i="name";l&&!r&&a(o,i,{configurable:!0,get:function(){try{return s(b,d(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-99bed730.a8c92adb.js.map