(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69823986"],{6860:function(t,e,a){"use strict";a("b9b1")},b0c0:function(t,e,a){var n=a("83ab"),c=a("5e77").EXISTS,o=a("e330"),s=a("9bf2").f,l=Function.prototype,r=o(l.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(i.exec),d="name";n&&!c&&s(l,d,{configurable:!0,get:function(){try{return u(i,r(this))[1]}catch(t){return""}}})},b9b1:function(t,e,a){},d398:function(t,e,a){"use strict";a.r(e);a("b680"),a("b0c0");var n=a("7a23"),c=function(t){return Object(n["C"])("data-v-078b3717"),t=t(),Object(n["A"])(),t},o={class:"container py-5 px-3 px-xl-0"},s=c((function(){return Object(n["h"])("header",null,[Object(n["h"])("div",{class:"d-flex align-items-center"},[Object(n["h"])("i",{class:"bi bi-cart-fill text-warning me-3 fs-2"}),Object(n["h"])("h2",{class:"h1 mb-0 text-primary"},"My cart")])],-1)})),l={class:"row align-items-start align-items-xl-center mb-0 list-unstyled"},r={class:"col-2 col-md-1 align-self-lg-center text-center"},i=["onClick"],u=c((function(){return Object(n["h"])("i",{class:"bi bi-x"},null,-1)})),d=[u],b={class:"col-4 col-md-3 text-center"},p=["src","alt"],m={key:1,class:"badge bg-primary fst-italic text-warning rounded-pill"},f={class:"col-6 col-md-8"},h={class:"row justify-content-between align-items-xl-center"},j={class:"col-12 col-md-6 col-lg-4 col-xl-4"},O={class:"fs-5 mb-md-0"},g={class:"col-12 col-md-6 col-lg-4 col-xl-3"},v={class:"input-group input-group-sm"},x=["onUpdate:modelValue","onChange"],y={class:"input-group-text fs-6"},C={class:"col-12 col-lg-4 col-xl-2"},k={class:"text-end py-2 py-lg-0 price-font border-adjusted"},w={class:"col-12 col-xl-3"},U={class:"text-end pt-2 price-font"},T={key:0},V={key:1},M={class:"text-warning"},$={key:0,class:"mt-2 total-price-font"},A={key:0,class:"text-end text-danger"},z={key:1,class:"text-end"},F={class:"text-danger"},E={class:"text-danger fs-6"},P={key:0,class:"row justify-content-center"},R={class:"col-lg-6"},S={class:"py-5"},L=c((function(){return Object(n["h"])("h3",{class:"h4 mb-3"},"Use Coupon",-1)})),q={class:"input-group input-group-sm"},D=["placeholder"],_=["disabled"],I=["disabled"],N={key:0,class:"text-warning fs-6"},B=Object(n["j"])("* See Coupon Usage "),J=c((function(){return Object(n["h"])("i",{class:"bi bi-arrow-down"},null,-1)})),W=[B,J],Y=Object(n["i"])('<div class="accordion mt-3" id="accordionExample" data-v-078b3717><div class="accordion-item" data-v-078b3717><h4 class="accordion-header" id="headingOne" data-v-078b3717><button class="accordion-button collapsed py-2 px-3 fs-6 text-muted" type="button" data-bs-toggle="collapse" data-bs-target="#couponUsage" aria-expanded="true" aria-controls="collapseOne" data-v-078b3717> Coupon Usage </button></h4><div id="couponUsage" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample" data-v-078b3717><div class="accordion-body" data-v-078b3717><ul class="fs-6 list-unstyled mb-0" data-v-078b3717><li data-v-078b3717><div class="d-flex py-1" data-v-078b3717><div data-v-078b3717><span data-v-078b3717>$120</span><i class="bi bi-arrow-right mx-2" data-v-078b3717></i><span class="fst-italic fw-bold" data-v-078b3717>CMDBTEN</span></div><span class="badge bg-primary ms-auto fst-italic" data-v-078b3717>10% off</span></div></li><li data-v-078b3717><div class="d-flex py-1" data-v-078b3717><div data-v-078b3717><span data-v-078b3717>$240</span><i class="bi bi-arrow-right mx-2" data-v-078b3717></i><span class="fst-italic fw-bold" data-v-078b3717>CMDBFIFTEEN</span></div><span class="badge bg-primary ms-auto fst-italic" data-v-078b3717>15% off</span></div></li><li data-v-078b3717><div class="d-flex py-1" data-v-078b3717><div data-v-078b3717><span data-v-078b3717>$360</span><i class="bi bi-arrow-right mx-2" data-v-078b3717></i><span class="fst-italic fw-bold" data-v-078b3717>CMDBTWENTY</span></div><span class="badge bg-primary ms-auto fst-italic" data-v-078b3717>20% off</span></div></li></ul></div></div></div></div>',1),Q=c((function(){return Object(n["h"])("h3",{class:"h4"},"Delivery Info",-1)})),X={class:"mb-3"},H=c((function(){return Object(n["h"])("label",{for:"email",class:"form-label"},"Email*",-1)})),G={class:"mb-3"},K=c((function(){return Object(n["h"])("label",{for:"name",class:"form-label"},"姓名*",-1)})),Z={class:"mb-3"},tt=c((function(){return Object(n["h"])("label",{for:"tel",class:"form-label"},"手機*",-1)})),et={class:"mb-3"},at=c((function(){return Object(n["h"])("label",{for:"address",class:"form-label"},"地址*",-1)})),nt={class:"mb-3"},ct=c((function(){return Object(n["h"])("label",{for:"message",class:"form-label"},"留言",-1)})),ot=c((function(){return Object(n["h"])("div",{class:"text-end"},[Object(n["h"])("button",{class:"btn btn-warning",type:"submit"},"Submit")],-1)}));function st(t,e,a,c,u,B){var J=Object(n["J"])("Loading"),st=Object(n["J"])("Field"),lt=Object(n["J"])("error-message"),rt=Object(n["J"])("Form");return Object(n["z"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(J,{active:u.isLoading},null,8,["active"]),Object(n["h"])("div",o,[s,Object(n["h"])("main",null,[Object(n["h"])("section",null,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["H"])(u.cart,(function(t){return Object(n["z"])(),Object(n["g"])("div",{class:"border-bottom border-primary pb-3 pt-4",key:t.id},[Object(n["h"])("ul",l,[Object(n["h"])("li",r,[Object(n["h"])("button",{onClick:Object(n["X"])((function(e){return B.deleteProduct(t)}),["prevent"]),type:"button",class:"btn btn-outline-warning btn-sm px-1 py-0 border-1"},d,8,i)]),Object(n["h"])("li",b,[t.product.imageUrl?(Object(n["z"])(),Object(n["g"])("img",{key:0,src:t.product.imageUrl[0],class:"img-adjusted img-fluid d-inline-block",alt:t.product.title},null,8,p)):(Object(n["z"])(),Object(n["g"])("span",m,"Subscription"))]),Object(n["h"])("li",f,[Object(n["h"])("div",h,[Object(n["h"])("div",j,[Object(n["h"])("h2",O,Object(n["M"])(t.product.title),1)]),Object(n["h"])("div",g,[Object(n["h"])("div",v,[Object(n["W"])(Object(n["h"])("input",{type:"number",class:"form-control","aria-label":"number","onUpdate:modelValue":function(e){return t.qty=e},min:"1",onChange:function(e){return B.updateProductTotal(t)}},null,40,x),[[n["Q"],t.qty,void 0,{number:!0}]]),Object(n["h"])("span",y,"/ "+Object(n["M"])(t.product.unit),1)])]),Object(n["h"])("div",C,[Object(n["h"])("div",k," Price: $"+Object(n["M"])(t.product.price),1)]),Object(n["h"])("div",w,[Object(n["h"])("div",U,[u.isCouponUsed?Object(n["f"])("",!0):(Object(n["z"])(),Object(n["g"])("div",T," Total: $"+Object(n["M"])(t.total.toFixed(2)),1)),u.isCouponUsed?(Object(n["z"])(),Object(n["g"])("div",V,[Object(n["h"])("del",null,"Total: $"+Object(n["M"])(t.total.toFixed(2)),1),Object(n["h"])("div",M," After discount: $"+Object(n["M"])(t.final_total.toFixed(2)),1)])):Object(n["f"])("",!0)])])])])])])})),128)),u.cart.length?(Object(n["z"])(),Object(n["g"])("div",$,[u.isCouponUsed?(Object(n["z"])(),Object(n["g"])("div",z,[Object(n["h"])("del",null,"Total: $"+Object(n["M"])(B.totalAmount.total.toFixed(2)),1),Object(n["h"])("div",F," After discount: $"+Object(n["M"])(B.totalAmount.finalTotal.toFixed(2)),1),Object(n["h"])("div",E,Object(n["M"])(B.discountRatio)+"% off",1)])):(Object(n["z"])(),Object(n["g"])("div",A," Total: $"+Object(n["M"])(B.totalAmount.total.toFixed(2)),1))])):Object(n["f"])("",!0)]),u.cart.length?(Object(n["z"])(),Object(n["g"])("section",P,[Object(n["h"])("div",R,[Object(n["h"])("section",S,[L,Object(n["h"])("div",q,[Object(n["W"])(Object(n["h"])("input",{type:"text",class:"form-control",placeholder:B.totalAmount.total<=120?"No coupon available ...":"Your coupon is ...","onUpdate:modelValue":e[0]||(e[0]=function(t){return u.couponCode=t}),disabled:"","aria-label":"input coupon","aria-describedby":"button-addon2"},null,8,D),[[n["Q"],u.couponCode]]),u.isCouponUsed?(Object(n["z"])(),Object(n["g"])("button",{key:0,class:"btn btn-outline-secondary text-muted",id:"button-addon2",type:"button",onClick:e[1]||(e[1]=function(){return B.useCoupon&&B.useCoupon.apply(B,arguments)}),disabled:u.isCouponUsed}," Coupon used ",8,_)):(Object(n["z"])(),Object(n["g"])("button",{key:1,class:"btn btn-outline-warning",type:"button",onClick:e[2]||(e[2]=function(){return B.useCoupon&&B.useCoupon.apply(B,arguments)}),id:"button-addon2",disabled:B.totalAmount.total<=120}," Use Coupon ",8,I))]),u.isCouponUsed?Object(n["f"])("",!0):(Object(n["z"])(),Object(n["g"])("small",N,W)),Y]),Object(n["h"])("section",null,[Q,Object(n["k"])(rt,{onSubmit:B.onSubmit},{default:Object(n["V"])((function(t){var a=t.errors;return[Object(n["h"])("div",X,[H,Object(n["k"])(st,{id:"email",name:"email",type:"email",class:Object(n["s"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:u.form.user.email,"onUpdate:modelValue":e[3]||(e[3]=function(t){return u.form.user.email=t})},null,8,["class","modelValue"]),Object(n["k"])(lt,{name:"email",class:"invalid-feedback"})]),Object(n["h"])("div",G,[K,Object(n["k"])(st,{id:"name",name:"name",type:"text",class:Object(n["s"])(["form-control",{"is-invalid":a["name"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:u.form.user.name,"onUpdate:modelValue":e[4]||(e[4]=function(t){return u.form.user.name=t})},null,8,["class","modelValue"]),Object(n["k"])(lt,{name:"name",class:"invalid-feedback"})]),Object(n["h"])("div",Z,[tt,Object(n["k"])(st,{id:"tel",name:"tel",type:"tel",class:Object(n["s"])(["form-control",{"is-invalid":a["tel"]}]),placeholder:"請輸入手機",rules:"numeric|length: 10|required",modelValue:u.form.user.tel,"onUpdate:modelValue":e[5]||(e[5]=function(t){return u.form.user.tel=t})},null,8,["class","modelValue"]),Object(n["k"])(lt,{name:"tel",class:"invalid-feedback"})]),Object(n["h"])("div",et,[at,Object(n["k"])(st,{id:"address",name:"address",type:"text",class:Object(n["s"])(["form-control",{"is-invalid":a["address"]}]),placeholder:"請輸入地址",rules:"required",modelValue:u.form.user.address,"onUpdate:modelValue":e[6]||(e[6]=function(t){return u.form.user.address=t})},null,8,["class","modelValue"]),Object(n["k"])(lt,{name:"address",class:"invalid-feedback"})]),Object(n["h"])("div",nt,[ct,Object(n["k"])(st,{id:"message",name:"message",as:"textarea",class:"form-control",modelValue:u.form.message,"onUpdate:modelValue":e[7]||(e[7]=function(t){return u.form.message=t})},null,8,["modelValue"])]),ot]})),_:1},8,["onSubmit"])])])])):Object(n["f"])("",!0)])])],64)}var lt=a("1da1"),rt=(a("96cf"),a("d3b7"),a("99af"),{data:function(){return{cart:[],discountTotal:"",couponCode:"",isLoading:!1,isCouponUsed:!1,form:{user:{name:"Andy",email:"123@gmail.com",tel:"0987654321",address:"asd"},message:""}}},inject:["emitter"],computed:{totalAmount:function(){var t=this.cart.reduce((function(t,e){return t+e.total}),0),e=this.cart.reduce((function(t,e){return t+e.final_total}),0);return{total:t,finalTotal:e}},discountRatio:function(){var t=100*(1-this.totalAmount.finalTotal/this.totalAmount.total).toFixed(2);return t}},methods:{assignCoupon:function(){this.totalAmount.total>=120&&(this.couponCode="CMDBTEN"),this.totalAmount.total>=240&&(this.couponCode="CMDBFIFTEEN"),this.totalAmount.total>=360&&(this.couponCode="CMDBTWENTY")},resetCoupon:function(){this.isCouponUsed=!1,this.couponCode=""},onSubmit:function(){var t=this;return Object(lt["a"])(regeneratorRuntime.mark((function e(){var a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/order"),n=t.form,e.next=5,t.$http.post(a,{data:n}).catch((function(t){return console.log(t)}));case 5:c=e.sent,t.isLoading=!1,t.$router.push({name:"UserCheckout",params:{orderID:c.data.orderId}}),console.log("onSubmit",c);case 9:case"end":return e.stop()}}),e)})))()},useCoupon:function(){var t=this;return Object(lt["a"])(regeneratorRuntime.mark((function e(){var a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.assignCoupon(),a={code:t.couponCode},n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/coupon"),e.next=5,t.$http.post(n,{data:a}).catch((function(t){return console.log(t)}));case 5:return c=e.sent,e.next=8,t.getCartProduct();case 8:t.isCouponUsed=c.data.success,t.discountTotal=c.data.data.final_total,console.log("useCoupon",c);case 11:case"end":return e.stop()}}),e)})))()},updateProductTotal:function(t){var e=this;return Object(lt["a"])(regeneratorRuntime.mark((function a(){var n,c,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isLoading=!0,n={product_id:t.product_id,qty:t.qty},c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/cart/").concat(t.id),a.next=5,e.$http.put(c,{data:n}).catch((function(t){return console.log(t)}));case 5:return o=a.sent,a.next=8,e.getCartProduct();case 8:e.isLoading=!1,console.log("updateProductTotal",o.data);case 10:case"end":return a.stop()}}),a)})))()},getCartProduct:function(){var t=this;return Object(lt["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/cart"),e.next=4,t.$http.get(a).catch((function(t){return console.log(t)}));case 4:n=e.sent,t.cart=n.data.data.carts,t.resetCoupon(),t.isLoading=!1,console.log("getCartProduct",n);case 9:case"end":return e.stop()}}),e)})))()},deleteProduct:function(t){var e=this;return Object(lt["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/cart/").concat(t.id),a.next=3,e.$http.delete(n).catch((function(t){return console.log(t)}));case 3:return a.next=5,e.getCartProduct();case 5:e.emitter.emit("calculate-product-number",e.cart.length);case 6:case"end":return a.stop()}}),a)})))()}},created:function(){this.getCartProduct()}}),it=(a("6860"),a("6b0d")),ut=a.n(it);const dt=ut()(rt,[["render",st],["__scopeId","data-v-078b3717"]]);e["default"]=dt}}]);
//# sourceMappingURL=chunk-69823986.a182a3ad.js.map